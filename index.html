<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
  </head>
  <body>
    <!-- Note the usage of `type=module` here as this is an ES6 module -->
    <script type="module">
      import init, { add, greet } from './pkg/without_a_bundler.js';
      import { send_example_to_js, receive_example_from_js } from "./pkg/without_a_bundler.js";

      async function run() {
        // First up we need to actually load the wasm file, so we use the
        await init();

        // And afterwards we can use all the functionality defined in wasm.
        const result = add(1, 2);
        greet(`1 + 2 = ${result}`);
        if (result !== 3)
          throw new Error("wasm addition doesn't work!");

        let example = send_example_to_js(); // get the example from wasm

        console.log(example);

        example.field2.push([5, 6]); // add another vec element to the end of the vec array
        receive_example_from_js(example); // send it back to rust wasm
      }

      run();
    </script>
  </body>
</html>
